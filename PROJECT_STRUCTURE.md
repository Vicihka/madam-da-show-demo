# ğŸ“ MADAM DA - Project Structure Guide

**Date:** December 7, 2025  
**Project:** Django E-Commerce Platform

---

## ğŸ—‚ï¸ **PROJECT FOLDER STRUCTURE**

```
DJANGO - MADAM DA/
â”‚
â”œâ”€â”€ ğŸ“ app/                          # Main Django application
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ admin.py                     # Django admin configuration
â”‚   â”œâ”€â”€ apps.py                      # App configuration
â”‚   â”œâ”€â”€ consumers.py                 # WebSocket consumers
â”‚   â”œâ”€â”€ employee_views.py            # Employee dashboard views
â”‚   â”œâ”€â”€ middleware.py                # Custom middleware
â”‚   â”œâ”€â”€ models.py                    # Database models
â”‚   â”œâ”€â”€ routing.py                   # WebSocket routing
â”‚   â”œâ”€â”€ telegram_bot.py              # Telegram bot integration
â”‚   â”œâ”€â”€ telegram_webhook.py          # Telegram webhook handler
â”‚   â”œâ”€â”€ tests.py                     # Unit tests
â”‚   â”œâ”€â”€ views.py                     # Main views
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ management/               # Management commands
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ ğŸ“ commands/
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ cleanup_expired_qr_codes.py  # Cleanup expired QR codes
â”‚   â”‚       â”œâ”€â”€ storage_info.py              # Show storage information
â”‚   â”‚       â””â”€â”€ backup_database.py          # Backup database
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ migrations/               # Database migrations
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ 0001_initial.py
â”‚       â””â”€â”€ ... (other migrations)
â”‚
â”œâ”€â”€ ğŸ“ project/                      # Django project settings
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ asgi.py                      # ASGI configuration (WebSocket)
â”‚   â”œâ”€â”€ settings.py                  # Django settings
â”‚   â”œâ”€â”€ urls.py                      # URL routing
â”‚   â””â”€â”€ wsgi.py                      # WSGI configuration
â”‚
â”œâ”€â”€ ğŸ“ templates/                    # HTML templates
â”‚   â”œâ”€â”€ ğŸ“ admin/                    # Admin templates
â”‚   â”‚   â”œâ”€â”€ ğŸ“ app/
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ order/
â”‚   â”‚   â”‚       â””â”€â”€ change_form.html
â”‚   â”‚   â”œâ”€â”€ commission_report.html
â”‚   â”‚   â”œâ”€â”€ index_with_sales_report.html
â”‚   â”‚   â”œâ”€â”€ orders_change_list.html
â”‚   â”‚   â””â”€â”€ sales_report.html
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ app/                      # App templates
â”‚       â”œâ”€â”€ index.html               # Homepage
â”‚       â”œâ”€â”€ checkout.html            # Checkout page
â”‚       â”œâ”€â”€ order_success.html       # Order success page
â”‚       â”œâ”€â”€ employee_dashboard.html  # Employee dashboard
â”‚       â”œâ”€â”€ employee_order_card.html # Order card template
â”‚       â””â”€â”€ ... (other templates)
â”‚
â”œâ”€â”€ ğŸ“ static/                       # Static files (CSS, JS, images)
â”‚   â”œâ”€â”€ ğŸ“ images/
â”‚   â”‚   â”œâ”€â”€ favicon.png
â”‚   â”‚   â”œâ”€â”€ jandt-logo.png
â”‚   â”‚   â””â”€â”€ madam-da-logo.png
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ js/
â”‚       â”œâ”€â”€ html5-qrcode.min.js
â”‚       â””â”€â”€ qrcode.min.js
â”‚
â”œâ”€â”€ ğŸ“ media/                         # User-uploaded files
â”‚   â”œâ”€â”€ ğŸ“ products/                 # Product images
â”‚   â”‚   â””â”€â”€ (product images)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ qr_codes/                 # QR code images
â”‚   â”‚   â”œâ”€â”€ qr_MD00001.png           # Payment QR codes
â”‚   â”‚   â””â”€â”€ tracking_qr_MD00031.png  # Tracking QR codes
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ hero_slides/              # Homepage carousel
â”‚       â”œâ”€â”€ (hero slide images)
â”‚       â””â”€â”€ ğŸ“ videos/
â”‚           â””â”€â”€ (hero slide videos)
â”‚
â”œâ”€â”€ ğŸ“ staticfiles/                  # Collected static files (production)
â”‚   â””â”€â”€ (generated by collectstatic)
â”‚
â”œâ”€â”€ ğŸ“ logs/                         # Application logs
â”‚   â”œâ”€â”€ django.log                   # General logs
â”‚   â””â”€â”€ security.log                 # Security logs
â”‚
â”œâ”€â”€ ğŸ“ backups/                      # Database backups (created by management command)
â”‚   â””â”€â”€ db_backup_YYYYMMDD_HHMMSS.json
â”‚
â”œâ”€â”€ ğŸ“ cache/                         # Cache files (if using file-based cache)
â”‚
â”œâ”€â”€ ğŸ“ venv/                         # Virtual environment (Python packages)
â”‚   â””â”€â”€ (Python virtual environment)
â”‚
â”œâ”€â”€ ğŸ“„ manage.py                     # Django management script
â”œâ”€â”€ ğŸ“„ requirements.txt              # Python dependencies
â”œâ”€â”€ ğŸ“„ db.sqlite3                    # SQLite database (development)
â”œâ”€â”€ ğŸ“„ gunicorn_config.py            # Gunicorn configuration
â”œâ”€â”€ ğŸ“„ Procfile                      # Heroku deployment config
â”œâ”€â”€ ğŸ“„ runtime.txt                   # Python version for Heroku
â”‚
â”œâ”€â”€ ğŸ“„ README.md                     # Project documentation
â”œâ”€â”€ ğŸ“„ .gitignore                    # Git ignore rules
â”‚
â””â”€â”€ ğŸ“„ START_SERVER_WEBSOCKET.bat    # Windows startup script

```

---

## ğŸ“¦ **STORAGE STRUCTURE**

### **1. Database Storage**
- **Location:** `db.sqlite3` (development) or PostgreSQL (production)
- **Models:** 11 models storing structured data
- **Size:** ~2-6 MB (grows with orders)

### **2. Media Files** (`media/`)
```
media/
â”œâ”€â”€ products/          # Product images (5MB max per file)
â”œâ”€â”€ qr_codes/          # QR code images (auto-generated)
â””â”€â”€ hero_slides/      # Homepage carousel images/videos
    â””â”€â”€ videos/        # Hero slide videos (50MB max per file)
```

**Storage Limits:**
- Product images: 5MB max
- Hero slide images: 5MB max
- Hero slide videos: 50MB max
- QR codes: Auto-generated, cleaned up after 7 days

### **3. Static Files** (`static/`)
```
static/
â”œâ”€â”€ images/            # Logo, favicon
â””â”€â”€ js/                # JavaScript libraries
```

**Note:** Run `python manage.py collectstatic` before production deployment

### **4. Log Files** (`logs/`)
```
logs/
â”œâ”€â”€ django.log         # Application logs
â””â”€â”€ security.log      # Security-related logs
```

**Rotation:** Manual (consider automatic rotation for production)

### **5. Backups** (`backups/`)
```
backups/
â””â”€â”€ db_backup_YYYYMMDD_HHMMSS.json
```

**Created by:** `python manage.py backup_database`

---

## ğŸ› ï¸ **MANAGEMENT COMMANDS**

### **Storage Management Commands:**

#### **1. Cleanup Expired QR Codes**
```bash
python manage.py cleanup_expired_qr_codes
```

**Options:**
- `--days=7` - Delete QR codes older than 7 days (default)
- `--dry-run` - Show what would be deleted without deleting
- `--force` - Force cleanup even if not expired

**Example:**
```bash
# Cleanup QR codes older than 7 days
python manage.py cleanup_expired_qr_codes

# Preview what would be deleted
python manage.py cleanup_expired_qr_codes --dry-run

# Cleanup QR codes older than 30 days
python manage.py cleanup_expired_qr_codes --days=30
```

---

#### **2. Storage Information**
```bash
python manage.py storage_info
```

**Shows:**
- Database size and record counts
- Media files size and count
- Static files size
- Log files size
- Total storage usage

**Example:**
```bash
python manage.py storage_info
```

---

#### **3. Backup Database**
```bash
python manage.py backup_database
```

**Options:**
- `--output=backups/` - Output directory (default: backups/)
- `--compress` - Compress backup file (gzip)

**Example:**
```bash
# Create backup
python manage.py backup_database

# Create compressed backup
python manage.py backup_database --compress

# Custom output directory
python manage.py backup_database --output=my_backups/
```

**Restore Backup:**
```bash
python manage.py loaddata backups/db_backup_20251207_120000.json
```

---

## ğŸ“‹ **STORAGE BEST PRACTICES**

### **1. Regular Cleanup**
- **QR Codes:** Run cleanup weekly
  ```bash
  python manage.py cleanup_expired_qr_codes --days=7
  ```

### **2. Regular Backups**
- **Database:** Backup daily or weekly
  ```bash
  python manage.py backup_database --compress
  ```

### **3. Monitor Storage**
- **Check Storage:** Run monthly
  ```bash
  python manage.py storage_info
  ```

### **4. File Organization**
- âœ… Keep media files organized by type
- âœ… Use proper file naming conventions
- âœ… Clean up orphaned files regularly
- âœ… Optimize images before upload (WebP format)

### **5. Log Management**
- âœ… Rotate logs monthly
- âœ… Archive old logs
- âœ… Monitor log file sizes

---

## ğŸ”§ **SETUP INSTRUCTIONS**

### **1. Create Required Directories**
```bash
# Media directories (auto-created by Django)
mkdir -p media/products
mkdir -p media/qr_codes
mkdir -p media/hero_slides/videos

# Logs directory
mkdir -p logs

# Backups directory
mkdir -p backups
```

### **2. Set File Permissions** (Linux/Mac)
```bash
chmod 755 media/
chmod 755 logs/
chmod 755 backups/
```

### **3. Run Initial Setup**
```bash
# Activate virtual environment
venv\Scripts\activate  # Windows
source venv/bin/activate  # Linux/Mac

# Run migrations
python manage.py migrate

# Collect static files
python manage.py collectstatic

# Create superuser
python manage.py createsuperuser
```

---

## ğŸ“Š **STORAGE GROWTH ESTIMATES**

### **Per Order:**
- Database: ~2-5 KB
- Files: ~50-100 KB (QR code)

### **Per Product:**
- Database: ~1-2 KB
- Files: ~100-500 KB (product image)

### **Monthly Growth (100 orders/month):**
- Database: ~200-500 KB
- Files: ~5-10 MB (QR codes)

### **Yearly Growth (1200 orders/year):**
- Database: ~2.4-6 MB
- Files: ~60-120 MB (QR codes)

---

## âœ… **STORAGE HEALTH CHECKLIST**

- [ ] Media directories exist and are writable
- [ ] Logs directory exists
- [ ] Backups directory exists
- [ ] Database indexes are created
- [ ] Static files are collected
- [ ] QR code cleanup is scheduled
- [ ] Database backups are scheduled
- [ ] Storage is monitored regularly

---

## ğŸš€ **AUTOMATED CLEANUP (Recommended)**

### **Windows Task Scheduler:**
1. Open Task Scheduler
2. Create Basic Task
3. Set trigger (weekly)
4. Action: Run `cleanup_expired_qr_codes.bat`

### **Linux Cron Job:**
```bash
# Edit crontab
crontab -e

# Add weekly cleanup (every Sunday at 2 AM)
0 2 * * 0 cd /path/to/project && python manage.py cleanup_expired_qr_codes --days=7

# Add daily backup (every day at 3 AM)
0 3 * * * cd /path/to/project && python manage.py backup_database --compress
```

---

## ğŸ“ **NOTES**

- **Media files** are user-uploaded and should be backed up regularly
- **QR codes** are auto-generated and can be safely deleted after expiration
- **Log files** should be rotated to prevent disk space issues
- **Database backups** should be stored off-server for safety
- **Static files** are generated and don't need backup (can be regenerated)

---

**Last Updated:** December 7, 2025  
**Next Review:** When storage exceeds 1GB or after 1000 orders



